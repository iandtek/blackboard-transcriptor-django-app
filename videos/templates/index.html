<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">

    <title>Home</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  </head>
  <style>
      .sentence {
          color: black;
      }
      .sentence:hover {
          color:cadetblue;
      }
  </style>
  <body>
      <div class="container text-center">
        <h1>BlackBoard Transcriptor</h1>
          <div class="embed-responsive embed-responsive-16by9">
            <video src="{{ video.url }}"></video>
            <br>
            <span>Instructions: Find the word you are looking for by pressing ctrl+f, click it and click play if you want to see what's on the video at that time.<br> Made with love by <a href="https://simonbermudez.com/">Simon Bermudez</a></span>
        </div>
      </div>
      <br>
    <div class="container" id="transcript">
        Loading...
    </div>

    <script>
        $.getJSON( "../{{ video.id }}.json", function( data ) {
            console.log(transcript)
            var html = ""
            
            for (sentence of data['transcription']){
                html += `
                    <a class="sentence" onclick="updateIframe(${parseInt(sentence.start)})" href="#video">
                        ${sentence.text}
                    </a>
                `;
            }
            $("#transcript").html(html)
        });

        function updateIframe(start) {
            var iframe = $("#video")
            iframe.attr("src", `https://www.youtube.com/embed/{{youtube_id}}?start=${start}`)
        }
    </script>
    
    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
  </body>
</html>
